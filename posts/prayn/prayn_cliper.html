<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post 1</title>
    <link rel="stylesheet" href="/style.css">
    <script>
        window.onload = function () {
            fetch('/navbar.html')
                .then(response => response.text())
                .then(data => document.getElementById('navbar-container').innerHTML = data);
        }
    </script>
</head>

<body>
    <div id="navbar-container"></div>

    <section class="tab" id="post1">
        <article>
            <p>
                Recent publications studying the inner workings of foundation models have focused largely on 
                internal representations of large language models (LLMs). In this short blog post, I will explore neural representations in visual foundation models 
                (<a href="https://arxiv.org/abs/2103.00020" target="_blank" rel="noopener">Radford et al.</a>, 
                <a href="https://arxiv.org/abs/2304.07193" target="_blank" rel="noopener">Oquab et al.</a>, 
                <a href="https://ai.meta.com/research/publications/segment-anything/" target="_blank" rel="noopener">Kirillov et al.</a>),
                trying to answer the question if we can find cells akin to the ones found in biological neural networks.
            </p>
            <p>
                For this we first create a dataset which can be used to  
                calculate receptive fields across artificial neurons (the 'design' phase). We then record neuronal 
                responses across many different artificial layers ('record'). Subsequently, we visualize and quantify 
                the responses using methods traditionally employed in neuroscience ('analyse'). Finally, we establish 
                an 'artificial-causality' by virtually lesioning a subset of neurons with known properties and 
                comparing the outcomes to our baseline ('perturb'). 
            </p>
            <p>
                Each of the aforementioned steps (design, record, analyse, perturb) mirrors techniques used in 
                neuroscience, with ANNs simplifying two (record & perturb) of these procedures dramatically. This 
                simplification is possible because, unlike in biological studies, we have direct access to every 
                single neuron and connection, allowing for an unprecedented level of detail in our investigation.
            </p>
        </article>


        <h2>Exploring Neural Representations in Visual Foundation Models</h2>
        <p>
            The attention layers of specific residual blocks are targeted in this 
            visualization process. Specifically, we are accessing 
            <code>visual.transformer.resblocks.[L].attn</code> for each block index 
            <code>L</code>, where <code>L ∈ {0, 1, ..., 11}.</code>
        </p>
        <img src="./media/stimuli.svg" alt="Description of Image" class="blog-image">
        <p>- </p>
        <h2>Custom Statistics Table</h2>
        <table>
          <tr>
            <!-- Header row -->
            <th></th>
            <th>Circle</th>
            <th>Square</th>
            <th>Triangle</th>
            <th>Empty</th>
          </tr>
          <tr>
            <!-- First row data ("Shape") -->
            <td>Shape Only</td>
            <td style="font-weight:bold">0.88 ± 0.08</td>
            <td>0.05 ± 0.03</td> 
            <td>0.07 ± 0.06</td> 
            <td>-</td>
          </tr>
          <tr>
            <!-- Second row data ("+Empty") -->
            <td>+ Empty</td>
            <td>0.09 ± 0.06</td> 
            <td>0.00 ± 0.00</td> 
            <td>0.00 ± 0.00</td>
            <td style="font-weight:bold">0.90 ± 0.06</td>
          </tr>
          <tr>
            <!-- Third row data ("+Color") -->
            <td>+ Color</td>
            <td style="font-weight:bold">0.73 ± 0.22</td>
            <td>0.06 ± 0.02</td>
            <td>0.00 ± 0.00</td>
            <td>0.21 ± 0.21</td>
          </tr>
        </table>
        
        <img src="./media/lesioned_logits.svg" alt="Description of Image" class="blog-image">
        <p>- </p>
        <div class="slider-container">
            <img id="layerImage" src="./media/layers/layer_2.svg" alt="Layer Visualization" class="blog-image">
            <div class="slider-wrapper">
                <span id="layerNumber">Layer 2</span>
                <input type="range" min="0" max="11" value="2" class="slider" id="layerSlider">
                
                <!-- Checkbox for Random weights -->
                <input type="checkbox" id="randomWeightsCheckbox">
                <label for="randomWeightsCheckbox">Random weights</label>
            </div>
        </div>
        <p>- </p>
    </section>
                
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.getElementById("layerSlider");
            const image = document.getElementById("layerImage");
            const layerNumber = document.getElementById("layerNumber");
            const randomWeightsCheckbox = document.getElementById("randomWeightsCheckbox"); // get the checkbox

            // Define a function to update image source
            function updateImageSource(value) {
                if (randomWeightsCheckbox.checked) {
                    image.src = './media/layers_random_weights/layer_' + value + '.svg';
                } else {
                    image.src = './media/layers/layer_' + value + '.svg';
                }
            }

            // Slider input behavior
            slider.oninput = function() {
                updateImageSource(this.value);
                layerNumber.innerText = 'Layer ' + this.value;
            }

            // Checkbox click behavior
            randomWeightsCheckbox.onclick = function() {
                updateImageSource(slider.value); // Update image based on current slider value
            }
        });
    </script>

</body>

</html>
